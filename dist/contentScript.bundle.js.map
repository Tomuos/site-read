{"version":3,"file":"contentScript.bundle.js","mappings":"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","sources":["webpack://site-read/./src/app/extension/lib/cleanText/cleanText.js","webpack://site-read/./src/app/extension/lib/keepSpacing/keepSpacing.js","webpack://site-read/./src/app/extension/lib/processWord/processWord.js","webpack://site-read/./src/app/extension/lib/removeExtraWhitespace/splitSpaces.js","webpack://site-read/./src/app/extension/lib/spacedElementsList/spacedElementsList.js","webpack://site-read/./src/app/extension/lib/spacingAroundElement/spacingAroundElement.js","webpack://site-read/webpack/bootstrap","webpack://site-read/./src/app/extension/contentScript.js"],"sourcesContent":["function cleanText (text) {\r\nreturn text.replace(/\\s+/g, ' ').trim();\r\n}\r\n\r\nmodule.exports = cleanText;","// const cleanWord = word.replace(/[^\\w\\s]/g, '');\r\n\r\nfunction keepSpacing(word) {\r\n    return word.replace(/[^\\w\\s]/g, '')\r\n} \r\n\r\nmodule.exports = keepSpacing;","const keepSpacing = require('../keepSpacing/keepSpacing')\r\n\r\nfunction processWord(word) {\r\n\r\n    \r\n\r\n    const cleanWord = keepSpacing(word); \r\n    \r\n    if (cleanWord.length === 1) {\r\n        return `<strong>${word}</strong>`\r\n    }\r\n    else if (cleanWord.length === 2 ){\r\n        return `<strong>${word.charAt(0)}</strong>${word.charAt(1)}`;\r\n    }\r\n    else if (cleanWord.length === 3){\r\n        return `<strong>${word.substring(0, 2)}</strong>${word.charAt(2)}`\r\n    }\r\n    else if (cleanWord.length > 3){\r\n        const boldMath = Math.ceil(cleanWord.length / 2);\r\n        return `<strong>${word.substring(0, boldMath)}</strong>${word.substring(boldMath)}`\r\n    }\r\n    \r\n    return word;\r\n\r\n}\r\n\r\nmodule.exports = processWord;","// const words = text.split(/(\\s+)/); \r\n\r\nfunction splitSpaces(text) {\r\n  return text.split(/(\\s+)/);\r\n}\r\n\r\nmodule.exports = splitSpaces;","const spacingAroundElement = require('../spacingAroundElement/spacingAroundElement')\r\n\r\nfunction spacingElementsList(root){\r\n    const anchorElement = root.querySelectorAll('a');\r\n    const italicElement = root.querySelectorAll('em');\r\n    // const strongElement = root.querySelectorAll('strong');\r\n    const spanElement = root.querySelectorAll('span');\r\n\r\n\r\n    anchorElement.forEach(element => spacingAroundElement(element));\r\n    italicElement.forEach(element => spacingAroundElement(element));\r\n    // strongElement.forEach(element => spacingAroundElement(element));\r\n    spanElement.forEach(element => spacingAroundElement(element));\r\n\r\n}\r\n\r\nmodule.exports = spacingElementsList;","function spacingAroundElement(element) {\r\n  const prevSibling = element.previousSibling;\r\n  const nextSibling = element.nextSibling;\r\n\r\n  // Ensure space before the element\r\n  if (!prevSibling || prevSibling.nodeType !== Node.TEXT_NODE) {\r\n    element.parentNode.insertBefore(document.createTextNode(' '), element);\r\n  } else if (!prevSibling.nodeValue.endsWith(' ')) {\r\n    prevSibling.nodeValue += ' ';\r\n  }\r\n\r\n  // Ensure space after the element\r\n  if (!nextSibling || nextSibling.nodeType !== Node.TEXT_NODE) {\r\n    element.parentNode.insertBefore(document.createTextNode(' '), nextSibling);\r\n  } else if (!nextSibling.nodeValue.startsWith(' ')) {\r\n    nextSibling.nodeValue = ' ' + nextSibling.nodeValue;\r\n  }\r\n}\r\n\r\nmodule.exports = spacingAroundElement;\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const cleanText = require('./lib/cleanText/cleanText');\r\nconst keepSpacing = require('./lib/keepSpacing/keepSpacing');\r\nconst splitSpaces = require('./lib/removeExtraWhitespace/splitSpaces');\r\nconst processWord = require('./lib/processWord/processWord')\r\nconst spacingElementsList = require('./lib/spacedElementsList/spacedElementsList')\r\n\r\n\r\nchrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\r\n  console.log('Message received in content script:', request);\r\n  if (request.action === 'toggleSiteRead') {\r\n    isSiteReadEnabled = request.state;\r\n    console.log('Toggling SiteRead, new state:', isSiteReadEnabled);\r\n    toggleSiteRead();\r\n    sendResponse({ status: 'SiteRead toggled' });\r\n  }\r\n});\r\n\r\n\r\nlet isSiteReadEnabled = true; // Track if the site read is enabled\r\n\r\nfunction applySiteRead() {\r\n  if (!isSiteReadEnabled) return;\r\n\r\n  // Only target text-related elements\r\n  const elements = document.querySelectorAll('p, li, a, em, ul, ol');\r\n\r\n  elements.forEach((element) => {\r\n    element.childNodes.forEach((node) => {\r\n      if (node.nodeType === Node.TEXT_NODE) {\r\n        let text = node.nodeValue;\r\n\r\n        // Clean and process the text\r\n        text = cleanText(text);\r\n        const words = splitSpaces(text);\r\n\r\n        const siteReadText = words\r\n          .map((word) => {\r\n            const cleanWord = keepSpacing(word);\r\n            return processWord(cleanWord);\r\n          })\r\n          .join('');\r\n\r\n        const span = document.createElement('span');\r\n        span.style.display = 'inline'; // Ensure spans don't disrupt layout\r\n        span.innerHTML = siteReadText;\r\n        node.replaceWith(span);\r\n      }\r\n    });\r\n  });\r\n\r\n  // Adjust inline element spacing\r\n  spacingElementsList(document.body);\r\n}\r\n\r\n\r\nfunction toggleSiteRead() {\r\n  isSiteReadEnabled = !isSiteReadEnabled;\r\n\r\n  if (isSiteReadEnabled) {\r\n    applySiteRead(); // Apply the effect when toggled on\r\n    observer.observe(document.body, { childList: true, subtree: true }); // Re-observe for changes\r\n  } else {\r\n    // Disconnect the observer and remove formatting\r\n    observer.disconnect();\r\n    document.querySelectorAll('span').forEach((span) => {\r\n      if (span.parentNode) {\r\n        span.replaceWith(...span.childNodes); // Remove the span while preserving its content\r\n      }\r\n    });\r\n    spacingElementsList(document.body);\r\n  }\r\n}\r\n\r\n// Reapply site read when DOM changes (for dynamic pages)\r\nconst observer = new MutationObserver(() => {\r\n  if (isSiteReadEnabled) applySiteRead(); // Reapply the site read effect on DOM changes\r\n});\r\n\r\n// Initial call to apply site read on page load\r\napplySiteRead();\r\n"],"names":["module","exports","text","replace","trim","word","keepSpacing","cleanWord","length","charAt","substring","boldMath","Math","ceil","split","spacingAroundElement","root","anchorElement","querySelectorAll","italicElement","spanElement","forEach","element","prevSibling","previousSibling","nextSibling","nodeType","Node","TEXT_NODE","nodeValue","endsWith","parentNode","insertBefore","document","createTextNode","startsWith","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","cleanText","splitSpaces","processWord","spacingElementsList","chrome","runtime","onMessage","addListener","request","sender","sendResponse","console","log","action","isSiteReadEnabled","state","applySiteRead","observer","observe","body","childList","subtree","disconnect","span","replaceWith","childNodes","status","node","siteReadText","map","join","createElement","style","display","innerHTML","MutationObserver"],"sourceRoot":""}